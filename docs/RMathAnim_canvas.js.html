<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RMathAnim/canvas.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RMathAnim/canvas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Generated a canvas, configures it and attaches it to the html body as required,
 * also adds the generated canvas rendering context 2D to the canvas itself as sc.cxt
 * 
 * @param {number} width The width of the canvas
 * @param {number} height The height of the canvas
 * @param {CanvasRenderingContext2DSettings} [options={alpha: true}] Options to be passed for the canvas
 * @returns {Object} An object with the canvas and the canvas context both in it --> {sc, cxt}
 */
function CreateCanvas(width, height, options = {alpha: true}) {
    const sc = document.createElement("canvas");
    sc.width = width;
    sc.height = height;
    sc.cxt = sc.getContext('2d', options);
    document.body.appendChild(sc);
    return {sc, cxt: sc.cxt};    
}

/**
 * Creates a recorder handle for the canvas and returns it.
 * @param {HTMLCanvasElement} canvas The canvas to record rendered frames from
 * @param {MediaRecorderOptions} [options={}] Options to be applied for the media recorder
 */
function CreateCanvasRecorder(canvas, options = {}) {
    canvas.MathRecorder = {mediaRecorder: null, chunks: []};
    canvas.MathRecorder.mediaRecorder = new MediaRecorder(canvas.captureStream(), Object.assign({mimeType: 'video/mp4'}, options));
    
    canvas.MathRecorder.mediaRecorder.ondataavailable = (e) => {        
        canvas.MathRecorder.chunks.push(e.data);
    };

    canvas.MathRecorder.mediaRecorder.onstop = () => {
        const media = new Blob(canvas.MathRecorder.chunks);
        const download = document.createElement('a');
        download.href = URL.createObjectURL(media);
        download.download = "MathAnim.mp4";
        download.click();

        canvas.MathRecorder.chunks = []; // reset the chunks once generated
    };

    canvas.MathRecorder.record = canvas.MathRecorder.mediaRecorder.start.bind(canvas.MathRecorder.mediaRecorder);
    canvas.MathRecorder.stopRecord = canvas.MathRecorder.mediaRecorder.stop.bind(canvas.MathRecorder.mediaRecorder);
    
    canvas.MathRecorder.recordFor = (time) => {        
        setTimeout(() => canvas.MathRecorder.stopRecord(), time + 1000);
        canvas.MathRecorder.record();
    };

    return canvas.MathRecorder;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="RACurve.html">RACurve</a></li><li><a href="RAHist.html">RAHist</a></li><li><a href="RAHueVector.html">RAHueVector</a></li><li><a href="RAPoly.html">RAPoly</a></li><li><a href="RAText.html">RAText</a></li><li><a href="RAVector.html">RAVector</a></li><li><a href="RAnimation.html">RAnimation</a></li><li><a href="RCurve.html">RCurve</a></li><li><a href="RGlobal.html">RGlobal</a></li><li><a href="RHist.html">RHist</a></li><li><a href="RPoly.html">RPoly</a></li><li><a href="RVector.html">RVector</a></li><li><a href="vec2.html">vec2</a></li><li><a href="vec3.html">vec3</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CreateCanvas">CreateCanvas</a></li><li><a href="global.html#CreateCanvasRecorder">CreateCanvasRecorder</a></li><li><a href="global.html#RColorStrToVec">RColorStrToVec</a></li><li><a href="global.html#RHueRotate">RHueRotate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Nov 10 2024 02:28:21 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
